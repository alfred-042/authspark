{
  "entities": {
    "UserMovie": {
      "title": "UserMovie",
      "type": "object",
      "description": "Stores the movie preferences (Want to Watch, Watching) for each user.",
      "properties": {
        "movieId": {
          "type": "string",
          "description": "Identifier for the movie from the external TMDB API."
        },
        "status": {
          "type": "string",
          "description": "The status of the movie for the user: 'want-to-watch' or 'watching'.",
          "enum": ["want-to-watch", "watching"]
        },
        "title": {
          "type": "string",
          "description": "The title of the movie."
        },
        "posterUrl": {
            "type": "string",
            "description": "The URL for the movie poster."
        }
      },
      "required": [
        "movieId",
        "status",
        "title",
        "posterUrl"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "google.com"
    ]
  },
  "firestore": {
      "collection_groups": [
          {
              "collection_id": "userMovies",
              "rules": [
                  {
                      "allow": "get, list",
                      "if": "request.auth != null && request.auth.uid == resource.data.userId"
                  }
              ]
          }
      ],
      "collections": [
          {
              "collection_id": "users",
              "rules": [
                  {
                      "allow": "read",
                      "if": "request.auth != null && request.auth.uid == userId"
                  }
              ],
              "collections": [
                  {
                      "collection_id": "userMovies",
                      "document_id": "{movieId}",
                      "schema": "UserMovie",
                      "rules": [
                          {
                              "allow": "create, update, delete",
                              "if": "request.auth != null && request.auth.uid == userId"
                          }
                      ]
                  }
              ]
          }
      ]
  }
}